#include "totvs.ch"
#include "rwmake.ch"
#include "portalcobrecom.ch"


/*/{Protheus.doc} CbcQuotation

Orçamentos do Portal Cobrecom
    
@author victorhugo
@since 23/05/2016
/*/
class CbcQuotation from LongClassName
	
	data cStatus
	data cId
	data cLastRevision
	data dDate
	data cTime
	data cIdUser
	data cNameUser
	data cType
	data dValidDate
	data cCodeCustomer
	data cUnitCustomer
	data cCnpjPadrao
	data cNameCustomer
	data cDelCodeCustomer
	data cDelUnitCustomer
	data cDelNameCustomer
  data cDelZipCode
	data cDelAddress
  data cDelNumber
  data cDelComplement
	data cDelCity
	data cDelState
	data cFreight
	data cPaymentCondition
	data cDescPayment
	data cIdApprover
	data cNameApprover
	data lCanEdit
	data lCanTakeApproval
	data lCanRequestTecnicalApproval
	data cComments
	data cReasonCancel
	data cCancelComments
	data cDeliveryType
	data dStandardDelivery
	data dStoredStandardDelivery
	data dBillingDate
	data lIssueReport
	data lPallets
	data lPartialBilling
	data cCustomerSalesOrder
	data cShippingMessage
	data cInvoiceMessage
	data aItems
	data aMessages
	data aDocuments
	data aRules
	data aRevisions
	data aCompetitors
	data aTaxinfo
	data nFixedCommission
	data nSugTotal
	data nAppTotal	
	data nMinRgTotal
	data nSugRgTotal	
	data nAppRgTotal
	data nCopperTotal	
	data nSugDiscountAvg
	data nAppDiscountAvg
	data nSugCommissionAvg
	data nAppCommissionAvg
	data nSugImp
	data nAppImp
	data dProcDate
	data cProcTime
	data cProcComments
	data lRetail
	data lCanPrint
	
	method newCbcQuotation() constructor
	
	method getStatus()
	method setStatus()
	method getId()
	method setId()
	method getLastRevision()
	method setLastRevision()
	method getDate()
	method setDate()
	method getTime()
	method setTime()
	method getIdUser()
	method setIdUser()
	method getNameUser()
	method setNameUser()
	method getType()
	method setType()
	method getValidDate()
	method setValidDate()
	method getCodeCustomer()
	method setCodeCustomer()
	method getUnitCustomer()
	method setUnitCustomer()
	method getNameCustomer()
	method setNameCustomer()
	method getCnpjNameApi()
	method getCnpjPadrao()
	method setCnpjPadrao()
	method getDelCodeCustomer()
	method setDelCodeCustomer()
	method getDelUnitCustomer()
	method setDelUnitCustomer()
	method getDelNameCustomer()
	method setDelNameCustomer()
  method getDelZipCode()
	method setDelZipCode()
	method getDelAddress()
	method setDelAddress()
  method getDelNumber()
	method setDelNumber()
  method getDelComplement()
	method setDelComplement()
	method getDelCity()
	method setDelCity()
	method getDelState()
	method setDelState()
	method getFreight()
	method setFreight()
	method getPaymentCondition()
	method setPaymentCondition()
	method getDescPayment()
	method setDescPayment()
	method getIdApprover()
	method setIdApprover()
	method getNameApprover()
	method setNameApprover()
	method canEdit()
	method setCanEdit()
	method canTakeApproval()
	method setCanTakeApproval()
	method canRequestTecnicalApproval()
	method setCanRequestTecnicalApproval()
	method getComments()
	method setComments()
	method getReasonCancel()
	method setReasonCancel()
	method getCancelComments()
	method setCancelComments()
	method getDeliveryType()
	method setDeliveryType()
	method getStandardDelivery()
	method setStandardDelivery()
	method getStoredStandardDelivery()
	method setStoredStandardDelivery()
	method getBillingDate()
	method setBillingDate()
	method isIssueReport()
	method setIssueReport()
	method isPallets()
	method setPallets()
	method isPartialBilling()
	method setPartialBilling()
	method getCustomerSalesOrder()
	method setCustomerSalesOrder()
	method getShippingMessage()
	method setShippingMessage()
	method getInvoiceMessage()
	method setInvoiceMessage()
	method getItems()
	method setItems() 
	method getMessages()
	method setMessages()
	method getDocuments()
	method setDocuments()
	method getRules()
	method setRules()
	method getRevisions()
	method setRevisions()
	method getCompetitors()
	method setCompetitors()
	method getTaxinfo()
	method setTaxinfo()
	method getFixedCommission()
	method setFixedCommission()
	method getSugTotal()
	method setSugTotal()
	method getAppTotal()
	method setAppTotal()
	method getMinRgTotal()
	method setMinRgTotal()
	method getSugRgTotal()
	method setSugRgTotal()
	method getAppRgTotal()
	method setAppRgTotal()
	method getCopperTotal()
	method setCopperTotal()
	method getSugDiscountAvg()
	method setSugDiscountAvg()
	method getAppDiscountAvg()
	method setAppDiscountAvg()
	method getSugCommissionAvg()
	method setSugCommissionAvg()
	method getAppCommissionAvg()
	method setAppCommissionAvg()	
	method getSugImp()
	method setSugImp()
	method getAppImp()
	method setAppImp()
	method getProcDate()
	method setProcDate()
	method getProcTime()
	method setProcTime()
	method getProcComments()
	method setProcComments()
	method isRetail()
	method setRetail()
	method canPrint()
	method setCanPrint()
	
	method toWsObject()
	method fromWsObject()
	method toJsonObject()
	method toJsonString()
	method fromJsonObject()
	method fromJsonLegacy()
	
endClass


/*/{Protheus.doc} newCbcQuotation

Construtor
    
@author victorhugo
@since 23/05/2016
/*/
method newCbcQuotation() class CbcQuotation
return self

/**
 * Getters/Setters
 */
method getStatus() class CbcQuotation
return ::cStatus

method setStatus(cStatus) class CbcQuotation
	::cStatus := cStatus
return

method getId() class CbcQuotation
return ::cId

method setId(cId) class CbcQuotation
	::cId := cId
return

method getLastRevision() class CbcQuotation
return ::cLastRevision

method setLastRevision(cLastRevision) class CbcQuotation
	::cLastRevision := cLastRevision
return

method getDate() class CbcQuotation
return ::dDate

method setDate(dDate) class CbcQuotation
	::dDate := dDate
return

method getTime() class CbcQuotation
return ::cTime

method setTime(cTime) class CbcQuotation
	::cTime := cTime
return

method getIdUser() class CbcQuotation
return ::cIdUser

method setIdUser(cIdUser) class CbcQuotation
	::cIdUser := cIdUser
return

method getNameUser() class CbcQuotation
return ::cNameUser

method setNameUser(cNameUser) class CbcQuotation
	::cNameUser := cNameUser
return

method getType() class CbcQuotation
return ::cType

method setType(cType) class CbcQuotation
	::cType := cType
return

method getValidDate() class CbcQuotation
return ::dValidDate

method setValidDate(dValidDate) class CbcQuotation
	::dValidDate := dValidDate
return

method getCodeCustomer() class CbcQuotation
return ::cCodeCustomer

method setCodeCustomer(cCodeCustomer) class CbcQuotation
	::cCodeCustomer := cCodeCustomer
return

method getUnitCustomer() class CbcQuotation
return ::cUnitCustomer

method setUnitCustomer(cUnitCustomer) class CbcQuotation
	::cUnitCustomer := cUnitCustomer
return

method getCnpjPadrao() class CbcQuotation
return ::cCnpjPadrao

method setCnpjPadrao(cCnpjPadrao) class CbcQuotation
	::cCnpjPadrao := cCnpjPadrao
return

method getNameCustomer() class CbcQuotation
return ::cNameCustomer

method setNameCustomer(cNameCustomer) class CbcQuotation
	::cNameCustomer := cNameCustomer
return


method getCnpjNameApi() class CbcQuotation
	local oRestClient 	:= Nil
	local oJsret		:= Nil
	local cCNPJ 		:= ''
	local cName			:= ''
	local aHeader		:= {}
	
	if (::getCodeCustomer() == DEFAULT_CUSTOMER_CODE;
		.and. ::getUnitCustomer() == DEFAULT_CUSTOMER_UNIT)
		if empty((cCNPJ := ::getCnpjPadrao()))
			cName := ::getNameCustomer()
		else
			aadd(aHeader, 'Content-Type: application/json')
			oRestClient := FWRest():New(GetNewPAr("XZ_CNAPIPJ","http://192.168.15.3:5000"))
			oRestClient:setPath("/cadinfo/" + Alltrim(cCNPJ) + "/02")
			if !oRestClient:Get(aHeader)
				cName := ::getNameCustomer()
			else
				oJsret := JsonObject():new()
				oJsret:fromJson('{"data": ' + oRestClient:GetResult() + '}')
				if empty(oJsret['data'])
					cName := ::getNameCustomer()
				else
					cName := '[P]-'
					cName += Alltrim(oJsret['data'][1]['razao_social'])
					cName += '-'
					cName += Alltrim(oJsret['data'][1]['nome_fantasia'])
				endif
			endif
			FreeObj(oRestClient)
			FreeObj(oJsret)			
		
		endif
	else
		cName := ::getNameCustomer()	
	endif
return cName


method getDelCodeCustomer() class CbcQuotation
return ::cDelCodeCustomer

method setDelCodeCustomer(cDelCodeCustomer) class CbcQuotation
	::cDelCodeCustomer := cDelCodeCustomer
return

method getDelUnitCustomer() class CbcQuotation
return ::cDelUnitCustomer

method setDelUnitCustomer(cDelUnitCustomer) class CbcQuotation
	::cDelUnitCustomer := cDelUnitCustomer
return

method getDelNameCustomer() class CbcQuotation
return ::cDelNameCustomer

method setDelNameCustomer(cDelNameCustomer) class CbcQuotation
	::cDelNameCustomer := cDelNameCustomer
return

method getDelZipCode() class CbcQuotation
return ::cDelZipCode

method setDelZipCode(cDelZipCode) class CbcQuotation
	::cDelZipCode := cDelZipCode
return

method getDelAddress() class CbcQuotation
return ::cDelAddress

method setDelAddress(cDelAddress) class CbcQuotation
	::cDelAddress := cDelAddress
return

method getDelNumber() class CbcQuotation
return ::cDelNumber

method setDelNumber(cDelNumber) class CbcQuotation
	::cDelNumber := cDelNumber
return

method getDelComplement() class CbcQuotation
return ::cDelComplement

method setDelComplement(cDelComplement) class CbcQuotation
	::cDelComplement := cDelComplement
return

method getDelCity() class CbcQuotation
return ::cDelCity

method setDelCity(cDelCity) class CbcQuotation
	::cDelCity := cDelCity
return

method getDelState() class CbcQuotation
return ::cDelState

method setDelState(cDelState) class CbcQuotation
	::cDelState := cDelState
return

method getFreight() class CbcQuotation
return ::cFreight

method setFreight(cFreight) class CbcQuotation
	::cFreight := cFreight
return

method getPaymentCondition() class CbcQuotation
return ::cPaymentCondition

method setPaymentCondition(cPaymentCondition) class CbcQuotation
	::cPaymentCondition := cPaymentCondition
return

method getDescPayment() class CbcQuotation
return ::cDescPayment

method setDescPayment(cDescPayment) class CbcQuotation
	::cDescPayment := cDescPayment
return

method getIdApprover() class CbcQuotation
return ::cIdApprover

method setIdApprover(cIdApprover) class CbcQuotation
	::cIdApprover := cIdApprover
return

method getNameApprover() class CbcQuotation
return ::cNameApprover

method setNameApprover(cNameApprover) class CbcQuotation
	::cNameApprover := cNameApprover
return

method canEdit() class CbcQuotation
return ::lCanEdit

method setCanEdit(lCanEdit) class CbcQuotation
	::lCanEdit := lCanEdit
return

method canTakeApproval() class CbcQuotation
return ::lCanTakeApproval

method setCanTakeApproval(lCanTakeApproval) class CbcQuotation
	::lCanTakeApproval := lCanTakeApproval
return

method canRequestTecnicalApproval() class CbcQuotation
return ::lCanRequestTecnicalApproval

method setCanRequestTecnicalApproval(lCanRequestTecnicalApproval) class CbcQuotation
	::lCanRequestTecnicalApproval := lCanRequestTecnicalApproval
return

method getComments() class CbcQuotation
return ::cComments

method setComments(cComments) class CbcQuotation
	::cComments := AllTrim(cComments)
return

method getReasonCancel() class CbcQuotation
return ::cReasonCancel

method setReasonCancel(cReasonCancel) class CbcQuotation
	::cReasonCancel := cReasonCancel
return

method getCancelComments() class CbcQuotation
return ::cCancelComments

method setCancelComments(cCancelComments) class CbcQuotation
	::cCancelComments := cCancelComments
return

method getDeliveryType() class CbcQuotation
return ::cDeliveryType

method setDeliveryType(cDeliveryType) class CbcQuotation
	::cDeliveryType := cDeliveryType
return

method getStandardDelivery() class CbcQuotation
return ::dStandardDelivery

method setStandardDelivery(dStandardDelivery) class CbcQuotation
	::dStandardDelivery := dStandardDelivery
return

method getStoredStandardDelivery() class CbcQuotation
return ::dStoredStandardDelivery

method setStoredStandardDelivery(dStoredStandardDelivery) class CbcQuotation
	::dStoredStandardDelivery := dStoredStandardDelivery
return

method getBillingDate() class CbcQuotation
return ::dBillingDate

method setBillingDate(dBillingDate) class CbcQuotation
	::dBillingDate := dBillingDate
return

method isIssueReport() class CbcQuotation
return ::lIssueReport

method setIssueReport(lIssueReport) class CbcQuotation
	::lIssueReport := lIssueReport
return

method isPallets() class CbcQuotation
return ::lPallets

method setPallets(lPallets) class CbcQuotation
	::lPallets := lPallets
return

method isPartialBilling() class CbcQuotation
return ::lPartialBilling

method setPartialBilling(lPartialBilling) class CbcQuotation
	::lPartialBilling := lPartialBilling
return

method getCustomerSalesOrder() class CbcQuotation
return ::cCustomerSalesOrder

method setCustomerSalesOrder(cCustomerSalesOrder) class CbcQuotation
	::cCustomerSalesOrder := cCustomerSalesOrder
return

method getShippingMessage() class CbcQuotation
return ::cShippingMessage

method setShippingMessage(cShippingMessage) class CbcQuotation
	::cShippingMessage := cShippingMessage
return

method getInvoiceMessage() class CbcQuotation
return ::cInvoiceMessage

method setInvoiceMessage(cInvoiceMessage) class CbcQuotation
	::cInvoiceMessage := cInvoiceMessage
return

method getItems() class CbcQuotation
return ::aItems

method setItems(aItems) class CbcQuotation
	::aItems := aItems
return

method getMessages() class CbcQuotation
return ::aMessages

method setMessages(aMessages) class CbcQuotation
	::aMessages := aMessages
return

method getDocuments() class CbcQuotation
return ::aDocuments

method setDocuments(aDocuments) class CbcQuotation
	::aDocuments := aDocuments
return

method getRules() class CbcQuotation
return ::aRules

method setRules(aRules) class CbcQuotation
	::aRules := aRules
return

method getRevisions() class CbcQuotation
return ::aRevisions

method setRevisions(aRevisions) class CbcQuotation
	::aRevisions := aRevisions
return

method getCompetitors() class CbcQuotation
return ::aCompetitors

method setCompetitors(aCompetitors) class CbcQuotation
	::aCompetitors := aCompetitors
return

method getTaxinfo() class CbcQuotation
return ::aTaxinfo

method setTaxinfo(aTaxin) class CbcQuotation
	::aTaxinfo := aTaxin
return

method getFixedCommission() class CbcQuotation
return ::nFixedCommission

method setFixedCommission(nFixedCommission) class CbcQuotation
	::nFixedCommission := nFixedCommission
return

method getSugTotal() class CbcQuotation
return ::nSugTotal

method setSugTotal(nSugTotal) class CbcQuotation
	::nSugTotal := nSugTotal
return

method getAppTotal() class CbcQuotation
return ::nAppTotal

method setAppTotal(nAppTotal) class CbcQuotation
	::nAppTotal := nAppTotal
return

method getMinRgTotal() class CbcQuotation
return ::nMinRgTotal

method setMinRgTotal(nMinRgTotal) class CbcQuotation
	::nMinRgTotal := nMinRgTotal
return

method getSugRgTotal() class CbcQuotation
return ::nSugRgTotal

method setSugRgTotal(nSugRgTotal) class CbcQuotation
	::nSugRgTotal := nSugRgTotal
return

method getAppRgTotal() class CbcQuotation
return ::nAppRgTotal

method setAppRgTotal(nAppRgTotal) class CbcQuotation
	::nAppRgTotal := nAppRgTotal
return

method getCopperTotal() class CbcQuotation
return ::nCopperTotal

method setCopperTotal(nCopperTotal) class CbcQuotation
	::nCopperTotal := nCopperTotal
return

method getSugDiscountAvg() class CbcQuotation
return ::nSugDiscountAvg

method setSugDiscountAvg(nSugDiscountAvg) class CbcQuotation
	::nSugDiscountAvg := nSugDiscountAvg
return

method getAppDiscountAvg() class CbcQuotation
return ::nAppDiscountAvg

method setAppDiscountAvg(nAppDiscountAvg) class CbcQuotation
	::nAppDiscountAvg := nAppDiscountAvg
return

method getSugCommissionAvg() class CbcQuotation
return ::nSugCommissionAvg

method setSugCommissionAvg(nSugCommissionAvg) class CbcQuotation
	::nSugCommissionAvg := nSugCommissionAvg
return

method getAppCommissionAvg() class CbcQuotation
return ::nAppCommissionAvg

method setAppCommissionAvg(nAppCommissionAvg) class CbcQuotation
	::nAppCommissionAvg := nAppCommissionAvg
return

method getSugImp() class CbcQuotation
return ::nSugImp

method setSugImp(nSugImp) class CbcQuotation
	::nSugImp := nSugImp
return

method getAppImp() class CbcQuotation
return ::nAppImp

method setAppImp(nAppImp) class CbcQuotation
	::nAppImp := nAppImp
return

method getProcDate() class CbcQuotation
return ::dProcDate

method setProcDate(dProcDate) class CbcQuotation
	::dProcDate := dProcDate
return

method getProcTime() class CbcQuotation
return ::cProcTime

method setProcTime(cProcTime) class CbcQuotation
	::cProcTime := cProcTime
return

method getProcComments() class CbcQuotation
return ::cProcComments

method setProcComments(cProcComments) class CbcQuotation
	::cProcComments := cProcComments
return

method isRetail() class CbcQuotation
return ::lRetail

method setRetail(lRetail) class CbcQuotation
	::lRetail := lRetail
return

method canPrint() class CbcQuotation
return ::lCanPrint

method setCanPrint(lCanPrint) class CbcQuotation
	::lCanPrint := lCanPrint
return


/*/{Protheus.doc} toWsObject

Retorna o objeto como uma instancia da respectiva classe de Web Service
	
@author victorhugo
@since 23/05/2016

@return WsCbcQuotation Instancia da respectiva classe de Web Service
/*/
method toWsObject() class CbcQuotation
	
	local nI	  	 	:= 0
	local oWsObj  	 	:= WsClassNew("WsCbcQuotation")
	local aItems  	 	:= ::getItems()
	local aMessages	 	:= ::getMessages()
	local aDocuments 	:= ::getDocuments()
	local aRules	 	:= ::getRules()
	local aRevisions 	:= ::getRevisions()
	local aCompetitors	:= ::getCompetitors()
	
	oWsObj:status 						:= ::getStatus()
	oWsObj:id 							:= ::getId()
	oWsObj:lastRevision					:= ::getLastRevision()
	oWsObj:date 						:= ::getDate()
	oWsObj:time 						:= ::getTime()  
	oWsObj:idUser 						:= ::getIdUser()
	oWsObj:nameUser 					:= ::getNameUser()
	oWsObj:type 						:= ::getType()	
	oWsObj:validDate 					:= ::getValidDate()
	oWsObj:codeCustomer 				:= ::getCodeCustomer()
	oWsObj:unitCustomer 				:= ::getUnitCustomer()
	oWsObj:CnpjPadrao					:= ::getCnpjPadrao()
	oWsObj:nameCustomer 				:= ::getNameCustomer()
	oWsObj:delCodeCustomer 				:= ::getDelCodeCustomer()
	oWsObj:delUnitCustomer 				:= ::getDelUnitCustomer()
	oWsObj:delNameCustomer 				:= ::getDelNameCustomer()
	oWsObj:delAddress 					:= ::getDelAddress()
	oWsObj:delCity 						:= ::getDelCity()
	oWsObj:delState 					:= ::getDelState()
	oWsObj:freight 						:= ::getFreight()
	oWsObj:paymentCondition 			:= ::getPaymentCondition()
	oWsObj:descPayment 	    			:= ::getDescPayment()
	oWsObj:idApprover 					:= ::getIdApprover()
	oWsObj:nameApprover 				:= ::getNameApprover()
	oWsObj:canEdit 						:= ::canEdit()
	oWsObj:canTakeApproval 				:= ::canTakeApproval()
	oWsObj:canRequestTecnicalApproval 	:= ::canRequestTecnicalApproval()
	oWsObj:comments						:= ::getComments()
	oWsObj:reasonCancel					:= ::getReasonCancel()
	oWsObj:cancelComments				:= ::getCancelComments()
	oWsObj:deliveryType					:= ::getDeliveryType()
	oWsObj:standardDelivery				:= ::getStandardDelivery()
	oWsObj:storedStandardDelivery		:= ::getStoredStandardDelivery()
	oWsObj:billingDate					:= ::getBillingDate()
	oWsObj:isIssueReport 				:= ::isIssueReport()
	oWsObj:isPallets 					:= ::isPallets()
	oWsObj:isPartialBilling 			:= ::isPartialBilling()
	oWsObj:customerSalesOrder			:= ::getCustomerSalesOrder()
	oWsObj:shippingMessage 				:= ::getShippingMessage()
	oWsObj:invoiceMessage 				:= ::getInvoiceMessage()
	oWsObj:fixedCommission				:= ::getFixedCommission()
	oWsObj:sugTotal						:= ::getSugTotal()
	oWsObj:appTotal						:= ::getAppTotal()
	oWsObj:minRgTotal					:= ::getMinRgTotal()
	oWsObj:sugRgTotal					:= ::getSugRgTotal()
	oWsObj:appRgTotal					:= ::getAppRgTotal()
	oWsObj:copperTotal					:= ::getCopperTotal()
	oWsObj:sugDiscountAvg				:= ::getSugDiscountAvg()
	oWsObj:appDiscountAvg				:= ::getAppDiscountAvg()
	oWsObj:sugCommissionAvg				:= ::getSugCommissionAvg()
	oWsObj:appCommissionAvg				:= ::getAppCommissionAvg()
	oWsObj:sugImp						:= ::getSugImp()
	oWsObj:appImp						:= ::getAppImp()
	oWsObj:procDate						:= ::getProcDate()
	oWsObj:procTime						:= ::getProcTime()
	oWsObj:procComments					:= ::getProcComments()
	oWsObj:isRetail						:= ::isRetail()
	oWsObj:canPrint						:= ::canPrint()
	oWsObj:items						:= {}
	oWsObj:messages						:= {}
	oWsObj:documents					:= {}
	oWsObj:rules						:= {}
	oWsObj:revisions					:= {}
	oWsObj:competitors					:= {}
	oWsObj:aTaxinfo						:= ::getTaxinfo()
	
	if (ValType(aItems) == "A")
		for nI := 1 to Len(aItems)
			aAdd(oWsObj:items, aItems[nI]:toWsObject())
		next nI	
	endIf
	
	if (ValType(aMessages) == "A")
		for nI := 1 to Len(aMessages)
			aAdd(oWsObj:messages, aMessages[nI]:toWsObject())
		next nI	
	endIf
	
	if (ValType(aDocuments) == "A")
		for nI := 1 to Len(aDocuments)
			aAdd(oWsObj:documents, aDocuments[nI]:toWsObject())
		next nI	
	endIf
	
	if (ValType(aRules) == "A")
		for nI := 1 to Len(aRules)
			aAdd(oWsObj:rules, aRules[nI]:toWsObject())
		next nI	
	endIf
	
	if (ValType(aRevisions) == "A")
		for nI := 1 to Len(aRevisions)
			aAdd(oWsObj:revisions, aRevisions[nI]:toWsObject())
		next nI	
	endIf
	
	if (ValType(aCompetitors) == "A")
		for nI := 1 to Len(aCompetitors)
			aAdd(oWsObj:competitors, aCompetitors[nI]:toWsObject())
		next nI	
	endIf

return oWsObj


/*/{Protheus.doc} fromWsObject

Popula as propriedades do objeto conforme a respectiva instancia da classe de Web Service
	
@author victorhugo
@since 23/05/2016

@param oWsObj, WsCbcQuotation, Instancia da respectiva classe de Web Service
/*/
method fromWsObject(oWsObj) class CbcQuotation
	
	local nI       		 := 0
	local oItem	   		 := nil
	local oCompetitor	 := nil
	local aItems   		 := {}
	local aCompetitors	 := {}
	local aMessages		 := {}
	local aTaxinfo		 := {}
	local aWsItems 		 := oWsObj:items
	local aWsCompetitors := oWsObj:competitors
	
	::setStatus(oWsObj:status)
	::setId(oWsObj:id)
	::setLastRevision(oWsObj:lastRevision)
	::setDate(oWsObj:date)
	::setTime(oWsObj:time) 
	::setIdUser(oWsObj:idUser)
	::setNameUser(oWsObj:nameUser)
	::setType(oWsObj:type)
	::setValidDate(oWsObj:validDate)
	::setCodeCustomer(oWsObj:codeCustomer)
	::setUnitCustomer(oWsObj:unitCustomer)
	::setCnpjPadrao(oWsObj:customer:cnpj)
	::setNameCustomer(oWsObj:nameCustomer)
	::setDelCodeCustomer(oWsObj:delCodeCustomer)
	::setDelUnitCustomer(oWsObj:delUnitCustomer)
	::setDelNameCustomer(oWsObj:delNameCustomer)
	::setDelAddress(oWsObj:delAddress)
	::setDelCity(oWsObj:delCity)
	::setDelState(oWsObj:delState)
	::setFreight(oWsObj:freight)
	::setPaymentCondition(oWsObj:paymentCondition)
	::setDescPayment(oWsObj:descPayment)
	::setIdApprover(oWsObj:idApprover)
	::setNameApprover(oWsObj:nameApprover)
	::setCanEdit(oWsObj:canEdit)
	::setComments(oWsObj:comments)
	::setReasonCancel(oWsObj:reasonCancel)
	::setCancelComments(oWsObj:cancelComments)
	::setDeliveryType(oWsObj:deliveryType)
	::setBillingDate(oWsObj:billingDate)
	::setIssueReport(oWsObj:isIssueReport)
	::setPallets(oWsObj:isPallets)
	::setPartialBilling(oWsObj:isPartialBilling)
	::setCustomerSalesOrder(oWsObj:customerSalesOrder)
	::setShippingMessage(oWsObj:shippingMessage)
	::setInvoiceMessage(oWsObj:invoiceMessage)
	::setFixedCommission(oWsObj:fixedCommission)
	::setSugTotal(oWsObj:sugTotal)
	::setAppTotal(oWsObj:appTotal)
	::setSugDiscountAvg(oWsObj:sugDiscountAvg)
	::setAppDiscountAvg(oWsObj:appDiscountAvg)
	::setSugCommissionAvg(oWsObj:sugCommissionAvg)
	::setAppCommissionAvg(oWsObj:appCommissionAvg)
	::setSugImp(oWsObj:sugImp)
	::setAppImp(oWsObj:appImp)
	::setProcDate(oWsObj:procDate)
	::setProcTime(oWsObj:procTime)
	::setProcComments(oWsObj:procComments)
	::setRetail(oWsObj:isRetail)
	::setCanPrint(oWsObj:canPrint)
	::setTaxinfo(oWsObj:aTaxinfo)
	
	if (ValType(aWsItems) == "A")
		for nI := 1 to Len(aWsItems)
			oItem := CbcQuotationItem():newCbcQuotationItem()
			oItem:fromWsObject(aWsItems[nI])
			aAdd(aItems, oItem)
		next nI
	endIf
	
	::setItems(aItems)
	
	if (ValType(aWsCompetitors) == "A")
		for nI := 1 to Len(aWsCompetitors)
			oCompetitor := CbcGeneric():newCbcGeneric()
			oCompetitor:fromWsObject(aWsCompetitors[nI])
			aAdd(aCompetitors, oCompetitor)
		next nI
	endIf
	::setCompetitors(aCompetitors)
	
return


/*/{Protheus.doc} toJsonObject

Retorna uma instancia JSON do objeto
	
@author victorhugo
@since 08/10/2018
/*/
method toJsonObject() class CbcQuotation
		
	local nI	  	 	:= 0
	local aItems  	 	:= ::getItems()
	local aMessages	 	:= ::getMessages()
	local aDocuments 	:= ::getDocuments()
	local aRules	 	:= ::getRules()
	local aRevisions 	:= ::getRevisions()
	local aCompetitors	:= ::getCompetitors()
	local oJson 		:= JsonObject():new()
	local oUtils	    := LibUtilsObj():newLibUtilsObj()
	
	oJson["status"] 						:= ::getStatus()
	oJson["id"] 							:= ::getId()
	oJson["lastRevision"] 					:= ::getLastRevision()
	oJson["date"] 							:= oUtils:getJsDate(::getDate())
	oJson["time"] 							:= ::getTime()  
	oJson["idUser"] 						:= ::getIdUser()
	oJson["nameUser"] 						:= ::getNameUser()
	oJson["type"] 							:= ::getType()	
	oJson["validDate"] 						:= oUtils:getJsDate(::getValidDate())
	oJson["codeCustomer"] 					:= ::getCodeCustomer()
	oJson["unitCustomer"] 					:= ::getUnitCustomer()
	oJson["nameCustomer"] 					:= ::getNameCustomer()
	oJson["CnpjPadrao"]                     := ::getCnpjPadrao()
	oJson["delCodeCustomer"] 				:= ::getDelCodeCustomer()
	oJson["delUnitCustomer"] 				:= ::getDelUnitCustomer()
	oJson["delNameCustomer"] 				:= ::getDelNameCustomer()
  oJson["delZipCode"] 					:= ::getDelZipCode()
	oJson["delAddress"] 					:= ::getDelAddress()
  oJson["delNumber"] 					:= ::getDelNumber()
  oJson["delComplement"] 					:= ::getDelComplement()
	oJson["delCity"] 						:= ::getDelCity()
	oJson["delState"] 						:= ::getDelState()
	oJson["freight"] 						:= ::getFreight()
	oJson["paymentCondition"] 				:= ::getPaymentCondition()
	oJson["descPayment"] 					:= ::getDescPayment()
	oJson["idApprover"] 					:= ::getIdApprover()
	oJson["nameApprover"] 					:= ::getNameApprover()
	oJson["canEdit"] 						:= ::canEdit()
	oJson["canTakeApproval"] 				:= ::canTakeApproval()
	oJson["canRequestTecnicalApproval"] 	:= ::canRequestTecnicalApproval()
	oJson["comments"] 						:= ::getComments()
	oJson["reasonCancel"] 					:= ::getReasonCancel()
	oJson["cancelComments"] 				:= ::getCancelComments()
	oJson["deliveryType"] 					:= ::getDeliveryType()
	oJson["standardDelivery"] 				:= oUtils:getJsDate(::getStandardDelivery())
	oJson["storedStandardDelivery"] 		:= oUtils:getJsDate(::getStoredStandardDelivery())	
  oJson["billingDate"] 					:= oUtils:getJsDate(::getBillingDate())
	oJson["isIssueReport"] 					:= ::isIssueReport()
	oJson["isPallets"] 						:= ::isPallets()
	oJson["isPartialBilling"] 				:= ::isPartialBilling()
	oJson["customerSalesOrder"] 			:= ::getCustomerSalesOrder()
	oJson["shippingMessage"] 				:= ::getShippingMessage()
	oJson["invoiceMessage"] 				:= ::getInvoiceMessage()
	oJson["fixedCommission"] 				:= ::getFixedCommission()
	oJson["sugTotal"] 						:= ::getSugTotal()
	oJson["appTotal"] 						:= ::getAppTotal()
	oJson["minRgTotal"] 					:= ::getMinRgTotal()
	oJson["sugRgTotal"] 					:= ::getSugRgTotal()
	oJson["appRgTotal"] 					:= ::getAppRgTotal()
	oJson["copperTotal"]				 	:= ::getCopperTotal()
	oJson["sugDiscountAvg"] 				:= ::getSugDiscountAvg()
	oJson["appDiscountAvg"] 				:= ::getAppDiscountAvg()
	oJson["sugCommissionAvg"] 				:= ::getSugCommissionAvg()
	oJson["appCommissionAvg"] 				:= ::getAppCommissionAvg()
	oJson["sugImp"] 						:= ::getSugImp()
	oJson["appImp"] 						:= ::getAppImp()
	oJson["procDate"] 						:= oUtils:getJsDate(::getProcDate())
	oJson["procTime"] 						:= ::getProcTime()
	oJson["procComments"] 					:= ::getProcComments()
	oJson["isRetail"] 						:= ::isRetail()
	oJson["canPrint"] 						:= ::canPrint()
	oJson["isBonus"] 			 			:= (oJson["type"] == QUOTATION_TYPE_BONUS)	
	oJson["isRevision"] 			 		:= (oJson["status"] == QUOTATION_STATUS_REVISION)
	oJson["underMaintenance"] 		 		:= (oJson["status"] == QUOTATION_STATUS_UNDER_MAINTENANCE)
	oJson["waitingApproval"] 		 		:= (oJson["status"] == QUOTATION_STATUS_WAITING_APPROVAL)
	oJson["approvingly"] 			 		:= (oJson["status"] == QUOTATION_STATUS_APPROVINGLY)
	oJson["waitingConfirm"] 		 		:= (oJson["status"] == QUOTATION_STATUS_WAITING_CONFIRM)
	oJson["confirmed"] 				 		:= (oJson["status"] == QUOTATION_STATUS_CONFIRMED)
	oJson["notApproved"] 			 		:= (oJson["status"] == QUOTATION_STATUS_NOT_APPROVED)
	oJson["tecnicalReject"] 			 	:= (oJson["status"] == QUOTATION_STATUS_TECNICAL_REJECT)
	oJson["canceled"] 				 		:= (oJson["status"] == QUOTATION_STATUS_CANCELED)
	oJson["waitingTecnicalApproval"] 		:= (oJson["status"] == QUOTATION_STATUS_WAITING_TECNICAL_APPROVAL)
	oJson["waitingProcessing"] 	     		:= (oJson["status"] == QUOTATION_STATUS_WAITING_PROCESSING)
	oJson["processing"] 	     	 		:= (oJson["status"] == QUOTATION_STATUS_PROCESSING)
	oJson["errorProcessing"] 	     		:= (oJson["status"] == QUOTATION_STATUS_ERROR_PROCESSING)

	oJson["items"]		 := {}
	oJson["messages"]	 := {}
	oJson["documents"]	 := {}
	oJson["rules"]		 := {}
	oJson["revisions"]	 := {}
	oJson["competitors"] := {}
	oJson["aTaxinfo"] 	 := ::getTaxinfo()
	
	
	if (ValType(aItems) == "A")
		for nI := 1 to Len(aItems)
			aAdd(oJson["items"], aItems[nI]:toJsonObject())
		next nI	
	endIf
	
	if (ValType(aMessages) == "A")
		for nI := 1 to Len(aMessages)
			aAdd(oJson["messages"], aMessages[nI]:toJsonObject())
		next nI	
	endIf
	
	if (ValType(aDocuments) == "A")
		for nI := 1 to Len(aDocuments)
			aAdd(oJson["documents"], aDocuments[nI]:toJsonObject())
		next nI	
	endIf
	
	if (ValType(aRules) == "A")
		for nI := 1 to Len(aRules)
			aAdd(oJson["rules"], aRules[nI]:toJsonObject())
		next nI	
	endIf
	
	if (ValType(aRevisions) == "A")
		for nI := 1 to Len(aRevisions)
			aAdd(oJson["revisions"], aRevisions[nI]:toJsonObject())
		next nI	
	endIf
	
	if (ValType(aCompetitors) == "A")
		for nI := 1 to Len(aCompetitors)
			aAdd(oJson["competitors"], aCompetitors[nI]:toJsonObject())
		next nI	
	endIf

return oJson


/*/{Protheus.doc} toJsonString

Retorna a string JSON do objeto
	
@author victorhugo
@since 08/10/2018
/*/
method toJsonString() class CbcQuotation	
return ::toJsonObject():toJson()


/*/{Protheus.doc} fromJsonObject

Popula as propriedades do objeto conforme a respectiva instancia da classe JSON
	
@author victorhugo
@since 23/05/2016

@param xJson, String/Object, JSON do Objeto
/*/
method fromJsonObject(xJson) class CbcQuotation
	
	local nI       		:= 0
	local aItems   		:= {}
	local aMessages		:= {}
	local aDocuments	:= {}
	local aRules		:= {}
	local aRevisions	:= {}
	local aCompetitors	:= {}
	local aJsItems 		:= {}
	local aJsMsgs  		:= {}
	local aJsDocs		:= {}
	local aJsRules		:= {}
	local aJsRevisions	:= {}
	local aJsCompetitors:= {}	
	local oItem	   		:= nil
	local oMsg	   		:= nil
	local oDoc			:= nil
	local oRule			:= nil
	local oRevision		:= nil
	local oCompetitor	:= nil
	local oUtils		:= LibUtilsObj():newLibUtilsObj()
	private oData		:= nil
	private oJson 		:= JsonObject():new()
	
	if (ValType(xJson) == "C")
		if ('"_classname":"CBCQUOTATION"' $ xJson)
			return ::fromJsonLegacy(xJson)
		else
			oJson:fromJson(xJson)
		endIf			
	else
		oJson := xJson
	endIf	
	
	if oUtils:isNull(oJson)
		ConOut("[CbcQuotation] Falha ao deserializar JSON do Orçamento")
		return .F.
	endIf
	
	::setStatus(oJson["status"])
	::setId(oJson["id"])
	::setLastRevision(oJson["lastRevision"])
	::setDate(oUtils:fromJsDate(oJson["date"])) 
	::setIdUser(oJson["idUser"])
	::setNameUser(oJson["nameUser"])
	::setType(oJson["type"])
	::setValidDate(oUtils:fromJsDate(oJson["validDate"]))
	::setCodeCustomer(oJson["codeCustomer"])
	::setUnitCustomer(oJson["unitCustomer"])
	::setCnpjPadrao(oJson:GetJsonText("CnpjPadrao"))
	::setNameCustomer(oJson["nameCustomer"])
	::setDelCodeCustomer(oJson["delCodeCustomer"])
	::setDelUnitCustomer(oJson["delUnitCustomer"])
	::setDelNameCustomer(oJson["delNameCustomer"])
  ::setDelZipCode(oJson["delZipCode"])
	::setDelAddress(oJson["delAddress"])
  ::setDelNumber(oJson["delNumber"])
  ::setDelComplement(oJson["delComplement"])
	::setDelCity(oJson["delCity"])
	::setDelState(oJson["delState"])
	::setFreight(oJson["freight"])
	::setPaymentCondition(oJson["paymentCondition"])
	::setDescPayment(oJson["descPayment"])
	::setIdApprover(oJson["idApprover"])
	::setNameApprover(oJson["nameApprover"])
	::setCanEdit(oJson["canEdit"])
	::setCanTakeApproval(oJson["canTakeApproval"])
	::setCanRequestTecnicalApproval(oJson["canRequestTecnicalApproval"])
	::setComments(oJson["comments"])
	::setReasonCancel(oJson["reasonCancel"])
	::setCancelComments(oJson["cancelComments"])
	::setDeliveryType(oJson["deliveryType"])
	::setStandardDelivery(oUtils:fromJsDate(oJson["standardDelivery"]))
	::setBillingDate(oUtils:fromJsDate(oJson["billingDate"]))	
	::setFixedCommission(oJson["fixedCommission"])	
	::setMinRgTotal(oJson["minRgTotal"])
	::setSugRgTotal(oJson["sugRgTotal"])
	::setAppRgTotal(oJson["appRgTotal"])
	::setCopperTotal(oJson["copperTotal"])
	::setSugDiscountAvg(oJson["sugDiscountAvg"])
	::setAppDiscountAvg(oJson["appDiscountAvg"])
	::setSugCommissionAvg(oJson["sugCommissionAvg"])
	::setAppCommissionAvg(oJson["appCommissionAvg"])	
	::setTime(oJson["time"])
	::setStoredStandardDelivery(oUtils:fromJsDate(oJson["storedStandardDelivery"]))	
	::setSugTotal(oJson["sugTotal"])
	::setAppTotal(oJson["appTotal"])
	::setSugImp(oJson["sugImp"])
	::setAppImp(oJson["appImp"])
	::setIssueReport(oJson["isIssueReport"])	
	::setPallets(oJson["isPallets"])
	::setPartialBilling(oJson["isPartialBilling"])
	::setCustomerSalesOrder(oJson["customerSalesOrder"])
	::setShippingMessage(oJson["shippingMessage"])	
	::setInvoiceMessage(oJson["invoiceMessage"])	
	::setProcDate(oJson["procDate"])	
	::setProcTime(oJson["procTime"])	
	::setProcComments(oJson["procComments"])	
	::setRetail(oJson["isRetail"])	
	::setCanPrint(oJson["canPrint"])
	::setTaxinfo(oJson["aTaxinfo"])
	
	aJsItems := oJson["items"]
	if (ValType(aJsItems) == "A")
		for nI := 1 to Len(aJsItems)
			oItem := CbcQuotationItem():newCbcQuotationItem()
			oItem:fromJsonObject(aJsItems[nI])
			aAdd(aItems, oItem)
		next nI
	endIf	
	::setItems(aItems)
	
	aJsMsgs := oJson["messages"]
	if (ValType(aJsMsgs) == "A")
		for nI := 1 to Len(aJsMsgs)
			oMsg := CbcMessage():newCbcMessage()
			oMsg:fromJsonObject(aJsMsgs[nI])
			aAdd(aMessages, oMsg)
		next nI
	endIf	
	::setMessages(aMessages)
	
	aJsDocs	:= oJson["documents"]
	if (ValType(aJsDocs) == "A")
		for nI := 1 to Len(aJsDocs)
			oDoc := CbcQuotationDocument():newCbcQuotationDocument()
			oDoc:fromJsonObject(aJsDocs[nI])
			aAdd(aDocuments, oDoc)
		next nI
	endIf	
	::setDocuments(aDocuments)
	
	aJsRules := oJson["rules"]
	if (ValType(aJsRules) == "A")
		for nI := 1 to Len(aJsRules)
			oRule := CbcQuotationRule():newCbcQuotationRule()
			oRule:fromJsonObject(aJsRules[nI])
			aAdd(aRules, oRule)
		next nI
	endIf	
	::setRules(aRules)
	
	aJsRevisions := oJson["revisions"]
	if (ValType(aJsRevisions) == "A")
		for nI := 1 to Len(aJsRevisions)
			oRevision := CbcQuotationRevision():newCbcQuotationRevision()
			oRevision:fromJsonObject(aJsRevisions[nI])
			aAdd(aRevisions, oRule)
		next nI
	endIf	
	::setRevisions(aRevisions)
	
	aJsCompetitors := oJson["competitors"]
	if (ValType(aJsCompetitors) == "A")
		for nI := 1 to Len(aJsCompetitors)
			oCompetitor := CbcGeneric():newCbcGeneric()
			oCompetitor:fromJsonObject(aJsCompetitors[nI])
			aAdd(aCompetitors, oCompetitor)
		next nI
	endIf	
	::setCompetitors(aCompetitors)
	
return .T.


/*/{Protheus.doc} fromJsonObject

Popula as propriedades do objeto conforme a respectiva instancia da classe JSON (Legado - Revisões)
	
@author victorhugo
@since 23/05/2016

@param xJson, String/Object, JSON do Objeto
/*/
method fromJsonLegacy(xJson) class CbcQuotation
	
	local nI       		:= 0
	local aItems   		:= {}
	local aMessages		:= {}
	local aDocuments	:= {}
	local aRules		:= {}
	local aRevisions	:= {}
	local aCompetitors	:= {}
	local aJsItems 		:= {}
	local aJsMsgs  		:= {}
	local aJsDocs		:= {}
	local aJsRules		:= {}
	local aJsRevisions	:= {}
	local aJsCompetitors:= {}	
	local oItem	   		:= nil
	local oMsg	   		:= nil
	local oDoc			:= nil
	local oRule			:= nil
	local oRevision		:= nil
	local oCompetitor	:= nil
	local oUtils		:= LibUtilsObj():newLibUtilsObj()
	private oJson		:= nil	
	
	if (ValType(xJson) == "C")
		FwJsonDeserialize(xJson, @oJson)
	else
		oJson := xJson
	endIf
	
	if oUtils:isNull(oJson)
		ConOut("[CbcQuotation] Falha ao deserializar JSON do Oramento")
		return .F.
	endIf
	
	::setStatus(oJson:cStatus)
	::setId(oJson:cId)
	::setLastRevision(oJson:cLastRevision)
	::setDate(oJson:dDate) 
	::setIdUser(oJson:cIdUser)
	::setNameUser(oJson:cNameUser)
	::setType(oJson:cType)
	::setValidDate(oJson:dValidDate)
	::setCodeCustomer(oJson:cCodeCustomer)
	::setUnitCustomer(oJson:cUnitCustomer)
	::setCnpjPadrao(oJson:cCnpjPadrao)
	::setNameCustomer(oJson:cNameCustomer)
	::setDelCodeCustomer(oJson:cDelCodeCustomer)
	::setDelUnitCustomer(oJson:cDelUnitCustomer)
	::setDelNameCustomer(oJson:cDelNameCustomer)
	::setDelAddress(oJson:cDelAddress)
	::setDelCity(oJson:cDelCity)
	::setDelState(oJson:cDelState)
	::setFreight(oJson:cFreight)
	::setPaymentCondition(oJson:cPaymentCondition)
	::setDescPayment(oJson:cDescPayment)
	::setIdApprover(oJson:cIdApprover)
	::setNameApprover(oJson:cNameApprover)
	::setCanEdit(oJson:lCanEdit)
	::setCanTakeApproval(oJson:lCanTakeApproval)
	::setCanRequestTecnicalApproval(oJson:lCanRequestTecnicalApproval)
	::setComments(oJson:cComments)
	::setReasonCancel(oJson:cReasonCancel)
	::setCancelComments(oJson:cCancelComments)
	::setDeliveryType(oJson:cDeliveryType)
	::setStandardDelivery(oJson:dStandardDelivery)
	::setBillingDate(oJson:dBillingDate)	
	::setFixedCommission(oJson:nFixedCommission)	
	::setMinRgTotal(oJson:nMinRgTotal)
	::setSugRgTotal(oJson:nSugRgTotal)
	::setAppRgTotal(oJson:nAppRgTotal)
	::setCopperTotal(oJson:nCopperTotal)
	::setSugDiscountAvg(oJson:nSugDiscountAvg)
	::setAppDiscountAvg(oJson:nAppDiscountAvg)
	::setSugCommissionAvg(oJson:nSugCommissionAvg)
	::setAppCommissionAvg(oJson:nAppCommissionAvg)
	::setTaxinfo(oJson:aTaxinfo)
	
	if (Type("oJson:cTime") != "U")
		::setTime(oJson:cTime)
	endIf
	if (Type("oJson:dStoredStandardDelivery") != "U")
		::setStoredStandardDelivery(oJson:dStoredStandardDelivery)
	endIf	
	if (Type("oJson:nSugTotal") != "U")
		::setSugTotal(oJson:nSugTotal)
	endIf	
	if (Type("oJson:nAppTotal") != "U")
		::setAppTotal(oJson:nAppTotal)
	endIf
	if (Type("oJson:nSugImp") != "U")
		::setSugImp(oJson:nSugImp)
	endIf	
	if (Type("oJson:nAppImp") != "U")
		::setAppImp(oJson:nAppImp)
	endIf	
	if (Type("oJson:lIssueReport") != "U")
		::setIssueReport(oJson:lIssueReport)
	endIf	
	if (Type("oJson:lPallets") != "U")	
		::setPallets(oJson:lPallets)
	endIf
	if (Type("oJson:lPartialBilling") != "U")	
		::setPartialBilling(oJson:lPartialBilling)
	endIf
	if (Type("oJson:cCustomerSalesOrder") != "U") 	
		::setCustomerSalesOrder(oJson:cCustomerSalesOrder)
	endIf
	if (Type("oJson:cShippingMessage") != "U")	
		::setShippingMessage(oJson:cShippingMessage)
	endIf
	if (Type("oJson:cInvoiceMessage") != "U")	
		::setInvoiceMessage(oJson:cInvoiceMessage)
	endIf
	if (Type("oJson:dProcDate") != "U")	
		::setProcDate(oJson:dProcDate)
	endIf
	if (Type("oJson:cProcTime") != "U")	
		::setProcTime(oJson:cProcTime)
	endIf	
	if (Type("oJson:cProcComments") != "U")	
		::setProcComments(oJson:cProcComments)
	endIf
	if (Type("oJson:lRetail") != "U")	
		::setRetail(oJson:lRetail)
	else	
		::setRetail(.F.)
	endIf
	if (Type("oJson:lCanPrint") != "U")	
		::setCanPrint(oJson:lCanPrint)
	else	
		::setCanPrint(.F.)
	endIf			
  if (Type("oJson:cDelZipCode") != "U")
		::setDelZipCode(oJson:cDelZipCode)
	endIf	
  if (Type("oJson:cDelNumber") != "U")
		::setDelNumber(oJson:cDelNumber)
	endIf	
  if (Type("oJson:cDelComplement") != "U")
		::setDelComplement(oJson:cDelComplement)
	endIf	
	
	aJsItems := oJson:aItems
	if (ValType(aJsItems) == "A")
		for nI := 1 to Len(aJsItems)
			oItem := CbcQuotationItem():newCbcQuotationItem()
			oItem:fromJsonLegacy(aJsItems[nI])
			aAdd(aItems, oItem)
		next nI
	endIf	
	::setItems(aItems)
	
	aJsMsgs := oJson:aMessages
	if (ValType(aJsMsgs) == "A")
		for nI := 1 to Len(aJsMsgs)
			oMsg := CbcMessage():newCbcMessage()
			oMsg:fromJsonLegacy(aJsMsgs[nI])
			aAdd(aMessages, oMsg)
		next nI
	endIf	
	::setMessages(aMessages)
	
	aJsDocs	:= oJson:aDocuments
	if (ValType(aJsDocs) == "A")
		for nI := 1 to Len(aJsDocs)
			oDoc := CbcQuotationDocument():newCbcQuotationDocument()
			oDoc:fromJsonLegacy(aJsDocs[nI])
			aAdd(aDocuments, oDoc)
		next nI
	endIf	
	::setDocuments(aDocuments)
	
	aJsRules := oJson:aRules
	if (ValType(aJsRules) == "A")
		for nI := 1 to Len(aJsRules)
			oRule := CbcQuotationRule():newCbcQuotationRule()
			oRule:fromJsonLegacy(aJsRules[nI])
			aAdd(aRules, oRule)
		next nI
	endIf	
	::setRules(aRules)
	
	aJsRevisions := oJson:aRevisions
	if (ValType(aJsRevisions) == "A")
		for nI := 1 to Len(aJsRevisions)
			oRevision := CbcQuotationRevision():newCbcQuotationRevision()
			oRevision:fromJsonLegacy(aJsRevisions[nI])
			aAdd(aRevisions, oRule)
		next nI
	endIf	
	::setRevisions(aRevisions)
	
	aJsCompetitors := oJson:aCompetitors
	if (ValType(aJsCompetitors) == "A")
		for nI := 1 to Len(aJsCompetitors)
			oCompetitor := CbcGeneric():newCbcGeneric()
			oCompetitor:fromJsonLegacy(aJsCompetitors[nI])
			aAdd(aCompetitors, oCompetitor)
		next nI
	endIf	
	::setCompetitors(aCompetitors)
	
return .T.
